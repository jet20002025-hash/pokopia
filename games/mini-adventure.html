<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokopia Mini Adventure - Pokopia Games</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 900px;
            width: 100%;
        }

        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-title {
            font-size: 2.5rem;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .game-subtitle {
            color: #718096;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .game-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            text-align: center;
            min-width: 120px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .game-area {
            position: relative;
            background: linear-gradient(180deg, #87CEEB 0%, #98FB98 50%, #90EE90 100%);
            border-radius: 15px;
            height: 500px;
            overflow: hidden;
            border: 3px solid #e2e8f0;
            margin-bottom: 30px;
        }

        .ditto {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #ff6b6b;
            border-radius: 50%;
            transition: all 0.1s ease;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .ditto::before {
            content: 'üîÑ';
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .material {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            animation: float 3s ease-in-out infinite;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .material:hover {
            transform: scale(1.2);
        }

        .wood {
            background: #8B4513;
        }

        .wood::before {
            content: 'ü™µ';
            position: absolute;
            top: -5px;
            left: -5px;
            font-size: 1.2rem;
        }

        .rock {
            background: #696969;
        }

        .rock::before {
            content: 'ü™®';
            position: absolute;
            top: -5px;
            left: -5px;
            font-size: 1.2rem;
        }

        .flower {
            background: #FF69B4;
        }

        .flower::before {
            content: 'üå∏';
            position: absolute;
            top: -5px;
            left: -5px;
            font-size: 1.2rem;
        }

        .berry {
            background: #FF4500;
        }

        .berry::before {
            content: 'ü´ê';
            position: absolute;
            top: -5px;
            left: -5px;
            font-size: 1.2rem;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .pokemon {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            animation: bounce 2s ease-in-out infinite;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pokemon:hover {
            transform: scale(1.1);
        }

        .bulbasaur {
            background: #90EE90;
        }

        .bulbasaur::before {
            content: 'üå±';
            position: absolute;
            top: 5px;
            left: 5px;
            font-size: 1.5rem;
        }

        .squirtle {
            background: #87CEEB;
        }

        .squirtle::before {
            content: 'üê¢';
            position: absolute;
            top: 5px;
            left: 5px;
            font-size: 1.5rem;
        }

        .pikachu {
            background: #FFD700;
        }

        .pikachu::before {
            content: '‚ö°';
            position: absolute;
            top: 5px;
            left: 5px;
            font-size: 1.5rem;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
        }

        .building {
            position: absolute;
            background: #DEB887;
            border-radius: 10px;
            transition: all 0.5s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .house {
            width: 80px;
            height: 60px;
        }

        .house::before {
            content: 'üè†';
            position: absolute;
            top: 10px;
            left: 20px;
            font-size: 2rem;
        }

        .tree {
            width: 40px;
            height: 60px;
            background: #228B22;
            border-radius: 20px 20px 0 0;
        }

        .tree::before {
            content: 'üå≥';
            position: absolute;
            top: 5px;
            left: 5px;
            font-size: 1.5rem;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }

        .btn-secondary:hover {
            background: #cbd5e0;
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
        }

        .instructions {
            background: #f7fafc;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border-left: 4px solid #667eea;
        }

        .instructions h3 {
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .instructions ul {
            list-style: none;
            padding: 0;
        }

        .instructions li {
            margin-bottom: 8px;
            color: #718096;
            padding-left: 20px;
            position: relative;
        }

        .instructions li::before {
            content: 'üéØ';
            position: absolute;
            left: 0;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 1.5rem;
            color: #4a5568;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .level-up {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            z-index: 1000;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: levelUpAnimation 1s ease;
        }

        @keyframes levelUpAnimation {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        .level-up h2 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .level-up p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .level-up button {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .game-container {
                padding: 20px;
                margin: 10px;
            }

            .game-title {
                font-size: 2rem;
            }

            .game-stats {
                gap: 15px;
            }

            .stat-item {
                min-width: 100px;
                padding: 12px 20px;
            }

            .game-area {
                height: 400px;
            }

            .controls {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="goBack()">‚Üê</button>
    
    <div class="game-container">
        <div class="game-header">
            <h1 class="game-title">üéÆ Pokopia Mini Adventure</h1>
            <p class="game-subtitle">Play as Ditto! Collect materials and build your Pok√©mon paradise. Use WASD keys to move around.</p>
            
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-value" id="level">1</div>
                    <div class="stat-label">Level</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="materials">0</div>
                    <div class="stat-label">Materials</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="buildings">0</div>
                    <div class="stat-label">Buildings</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="pokemonFriends">0</div>
                    <div class="stat-label">Pok√©mon Friends</div>
                </div>
            </div>
        </div>

        <div class="instructions">
            <h3>How to Play:</h3>
            <ul>
                <li>Use WASD keys or arrow keys to move Ditto around</li>
                <li>Collect materials (wood, rocks, flowers, berries) by clicking on them</li>
                <li>Meet Pok√©mon friends and learn their abilities</li>
                <li>Build houses and trees to create your paradise</li>
                <li>Level up by collecting materials and making friends</li>
            </ul>
        </div>

        <div class="game-area" id="gameArea">
            <div class="ditto" id="ditto"></div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="buildHouse()">üè† Build House (5 materials)</button>
            <button class="btn btn-success" onclick="plantTree()">üå≥ Plant Tree (3 materials)</button>
            <button class="btn btn-secondary" onclick="resetGame()">üîÑ Reset Game</button>
        </div>
    </div>

    <script>
        let gameState = {
            level: 1,
            materials: 0,
            buildings: 0,
            pokemonFriends: 0,
            dittoPosition: { x: 450, y: 250 },
            collectedMaterials: [],
            pokemonMet: [],
            buildings: []
        };

        let keys = {};
        let gameRunning = true;

        // Initialize game
        function initGame() {
            const gameArea = document.getElementById('gameArea');
            const ditto = document.getElementById('ditto');
            
            // Set initial ditto position
            ditto.style.left = gameState.dittoPosition.x + 'px';
            ditto.style.top = gameState.dittoPosition.y + 'px';
            
            // Generate initial materials
            generateMaterials();
            generatePokemon();
            
            // Start game loop
            gameLoop();
            
            // Load saved game
            loadGame();
        }

        function generateMaterials() {
            const gameArea = document.getElementById('gameArea');
            const materialTypes = ['wood', 'rock', 'flower', 'berry'];
            
            // Clear existing materials
            document.querySelectorAll('.material').forEach(material => material.remove());
            
            // Generate new materials
            for (let i = 0; i < 15; i++) {
                const material = document.createElement('div');
                material.className = `material ${materialTypes[Math.floor(Math.random() * materialTypes.length)]}`;
                
                const x = Math.random() * (gameArea.offsetWidth - 40);
                const y = Math.random() * (gameArea.offsetHeight - 40);
                
                material.style.left = x + 'px';
                material.style.top = y + 'px';
                
                material.addEventListener('click', () => collectMaterial(material));
                
                gameArea.appendChild(material);
            }
        }

        function generatePokemon() {
            const gameArea = document.getElementById('gameArea');
            const pokemonTypes = ['bulbasaur', 'squirtle', 'pikachu'];
            
            // Clear existing pokemon
            document.querySelectorAll('.pokemon').forEach(pokemon => pokemon.remove());
            
            // Generate new pokemon
            for (let i = 0; i < 5; i++) {
                const pokemon = document.createElement('div');
                pokemon.className = `pokemon ${pokemonTypes[Math.floor(Math.random() * pokemonTypes.length)]}`;
                
                const x = Math.random() * (gameArea.offsetWidth - 50);
                const y = Math.random() * (gameArea.offsetHeight - 50);
                
                pokemon.style.left = x + 'px';
                pokemon.style.top = y + 'px';
                
                pokemon.addEventListener('click', () => meetPokemon(pokemon));
                
                gameArea.appendChild(pokemon);
            }
        }

        function collectMaterial(material) {
            if (!gameRunning) return;
            
            gameState.materials++;
            updateStats();
            
            // Add collection effect
            material.style.transform = 'scale(1.5)';
            material.style.opacity = '0';
            
            setTimeout(() => {
                material.remove();
            }, 300);
            
            // Check for level up
            checkLevelUp();
            
            // Show notification
            showNotification('Material collected! +1', 'success');
        }

        function meetPokemon(pokemon) {
            if (!gameRunning) return;
            
            const pokemonType = pokemon.className.split(' ')[1];
            
            if (!gameState.pokemonMet.includes(pokemonType)) {
                gameState.pokemonFriends++;
                gameState.pokemonMet.push(pokemonType);
                updateStats();
                
                // Add meeting effect
                pokemon.style.transform = 'scale(1.3)';
                pokemon.style.background = '#90EE90';
                
                setTimeout(() => {
                    pokemon.style.transform = 'scale(1)';
                    pokemon.style.background = '';
                }, 500);
                
                // Check for level up
                checkLevelUp();
                
                // Show notification
                showNotification(`Met ${pokemonType}! New friend!`, 'success');
            } else {
                showNotification(`Already friends with ${pokemonType}!`, 'info');
            }
        }

        function buildHouse() {
            if (gameState.materials < 5) {
                showNotification('Not enough materials! Need 5.', 'error');
                return;
            }
            
            gameState.materials -= 5;
            gameState.buildings++;
            updateStats();
            
            const gameArea = document.getElementById('gameArea');
            const house = document.createElement('div');
            house.className = 'building house';
            
            const x = Math.random() * (gameArea.offsetWidth - 80);
            const y = Math.random() * (gameArea.offsetHeight - 60);
            
            house.style.left = x + 'px';
            house.style.top = y + 'px';
            
            gameArea.appendChild(house);
            
            showNotification('House built! üè†', 'success');
            checkLevelUp();
        }

        function plantTree() {
            if (gameState.materials < 3) {
                showNotification('Not enough materials! Need 3.', 'error');
                return;
            }
            
            gameState.materials -= 3;
            gameState.buildings++;
            updateStats();
            
            const gameArea = document.getElementById('gameArea');
            const tree = document.createElement('div');
            tree.className = 'building tree';
            
            const x = Math.random() * (gameArea.offsetWidth - 40);
            const y = Math.random() * (gameArea.offsetHeight - 60);
            
            tree.style.left = x + 'px';
            tree.style.top = y + 'px';
            
            gameArea.appendChild(tree);
            
            showNotification('Tree planted! üå≥', 'success');
            checkLevelUp();
        }

        function checkLevelUp() {
            const requiredMaterials = gameState.level * 10;
            const requiredFriends = gameState.level * 2;
            
            if (gameState.materials >= requiredMaterials && gameState.pokemonFriends >= requiredFriends) {
                gameState.level++;
                updateStats();
                showLevelUp();
            }
        }

        function showLevelUp() {
            const levelUpDiv = document.createElement('div');
            levelUpDiv.className = 'level-up';
            levelUpDiv.innerHTML = `
                <h2>üéâ Level Up!</h2>
                <p>You reached level ${gameState.level}!</p>
                <p>New materials and Pok√©mon will appear!</p>
                <button onclick="closeLevelUp()">Continue</button>
            `;
            
            document.body.appendChild(levelUpDiv);
            
            // Regenerate materials and pokemon
            setTimeout(() => {
                generateMaterials();
                generatePokemon();
            }, 1000);
        }

        function closeLevelUp() {
            document.querySelector('.level-up').remove();
        }

        function updateStats() {
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('materials').textContent = gameState.materials;
            document.getElementById('buildings').textContent = gameState.buildings;
            document.getElementById('pokemonFriends').textContent = gameState.pokemonFriends;
        }

        function resetGame() {
            gameState = {
                level: 1,
                materials: 0,
                buildings: 0,
                pokemonFriends: 0,
                dittoPosition: { x: 450, y: 250 },
                collectedMaterials: [],
                pokemonMet: [],
                buildings: []
            };
            
            updateStats();
            
            // Clear all buildings
            document.querySelectorAll('.building').forEach(building => building.remove());
            
            // Regenerate materials and pokemon
            generateMaterials();
            generatePokemon();
            
            // Reset ditto position
            const ditto = document.getElementById('ditto');
            ditto.style.left = gameState.dittoPosition.x + 'px';
            ditto.style.top = gameState.dittoPosition.y + 'px';
            
            showNotification('Game reset! üéÆ', 'info');
        }

        function gameLoop() {
            if (!gameRunning) return;
            
            const ditto = document.getElementById('ditto');
            const gameArea = document.getElementById('gameArea');
            
            // Move ditto based on keys
            if (keys['w'] || keys['ArrowUp']) {
                gameState.dittoPosition.y = Math.max(0, gameState.dittoPosition.y - 3);
            }
            if (keys['s'] || keys['ArrowDown']) {
                gameState.dittoPosition.y = Math.min(gameArea.offsetHeight - 40, gameState.dittoPosition.y + 3);
            }
            if (keys['a'] || keys['ArrowLeft']) {
                gameState.dittoPosition.x = Math.max(0, gameState.dittoPosition.x - 3);
            }
            if (keys['d'] || keys['ArrowRight']) {
                gameState.dittoPosition.x = Math.min(gameArea.offsetWidth - 40, gameState.dittoPosition.x + 3);
            }
            
            // Update ditto position
            ditto.style.left = gameState.dittoPosition.x + 'px';
            ditto.style.top = gameState.dittoPosition.y + 'px';
            
            requestAnimationFrame(gameLoop);
        }

        // Keyboard controls
        document.addEventListener('keydown', (e) => {
            keys[e.key.toLowerCase()] = true;
            keys[e.key] = true;
        });

        document.addEventListener('keyup', (e) => {
            keys[e.key.toLowerCase()] = false;
            keys[e.key] = false;
        });

        function saveGame() {
            localStorage.setItem('pokopia-mini-adventure', JSON.stringify(gameState));
        }

        function loadGame() {
            const saved = localStorage.getItem('pokopia-mini-adventure');
            if (saved) {
                gameState = { ...gameState, ...JSON.parse(saved) };
                updateStats();
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#48bb78' : type === 'error' ? '#f56565' : '#4299e1'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                font-weight: 500;
                animation: slideIn 0.3s ease;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function goBack() {
            saveGame();
            window.history.back();
        }

        // Auto-save every 30 seconds
        setInterval(saveGame, 30000);

        // Initialize the game
        document.addEventListener('DOMContentLoaded', function() {
            initGame();
        });

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
